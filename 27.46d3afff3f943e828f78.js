"use strict";(self.webpackChunklaboratorio=self.webpackChunklaboratorio||[]).push([[27],{2027:(ph,m,i)=>{i.r(m),i.d(m,{HomeModule:()=>Mh});var z=i(8583),n=i(4655),o=i(8239),t={prefix:"fas",iconName:"arrow-circle-right",icon:[512,512,[],"f0a9","M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z"]},M={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"]},H={prefix:"fas",iconName:"file-alt",icon:[384,512,[],"f15c","M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"]},p={prefix:"fas",iconName:"share-square",icon:[576,512,[],"f14d","M568.482 177.448L424.479 313.433C409.3 327.768 384 317.14 384 295.985v-71.963c-144.575.97-205.566 35.113-164.775 171.353 4.483 14.973-12.846 26.567-25.006 17.33C155.252 383.105 120 326.488 120 269.339c0-143.937 117.599-172.5 264-173.312V24.012c0-21.174 25.317-31.768 40.479-17.448l144.003 135.988c10.02 9.463 10.028 25.425 0 34.896zM384 379.128V448H64V128h50.916a11.99 11.99 0 0 0 8.648-3.693c14.953-15.568 32.237-27.89 51.014-37.676C185.708 80.83 181.584 64 169.033 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-88.806c0-8.288-8.197-14.066-16.011-11.302a71.83 71.83 0 0 1-34.189 3.377c-7.27-1.046-13.8 4.514-13.8 11.859z"]},C={prefix:"fas",iconName:"user-friends",icon:[640,512,[],"f500","M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"]},Kr=i(5758),Yr=i(8052),h=i(3679),Xr=i(8259),V=i.n(Xr),c=i(7716),L=i(9517),$r=i(4699),ch=i(7358),ah=i(4901),eh=i(1769),d=i(3302),fh=i(3738),s=i(8295),ih=i(9983),lh=i(1095),vh=i(6627),x=i(1679);function rh(l,r){if(1&l){const a=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"ul",24),c.TgZ(2,"li",25),c.TgZ(3,"div",26),c.TgZ(4,"button",27),c.NdJ("click",function(){c.CHM(a);const f=c.oxw();return f.addArticulo(f.articuloSelected)}),c.TgZ(5,"mat-icon"),c._uU(6,"add"),c.qZA(),c.qZA(),c.TgZ(7,"button",27),c.NdJ("click",function(){c.CHM(a);const f=c.oxw();return f.removeArticulo(f.articuloSelected)}),c.TgZ(8,"mat-icon"),c._uU(9,"remove"),c.qZA(),c.qZA(),c.TgZ(10,"span",28),c._uU(11),c.qZA(),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&l){const a=c.oxw();c.xp6(11),c.hij(" ",a.articuloSelected.Cantidad,""),c.xp6(1),c.hij(" ",a.articuloSelected.Descripcion," ")}}function hh(l,r){1&l&&(c.TgZ(0,"div",1),c.TgZ(1,"div",29),c.TgZ(2,"ul",24),c.TgZ(3,"li",25),c.TgZ(4,"h2"),c._uU(5,"Agregue un articulo"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA())}const u=function(){return["/prestamos"]},oh=function(){return["/articulos"]},nh=function(){return["/usuarios"]},sh=function(){return{title:"Confirmar prestamo",text:"\xbfEstas seguro de guardar este prestamo?",icon:"warning",confirmButtonText:"Confirmar",showCancelButton:!0,cancelButtonText:"Cancelar"}},mh=[{path:"",component:(()=>{class l{constructor(a,e,f,v){this.modalService=a,this.prestamoSvc=e,this.articuloSvc=f,this.usrSvc=v,this.faFileAlt=H,this.faUserFriends=C,this.faDatabase=M,this.faShareSquare=p,this.faArrowCircleRight=t,this.countPrestamos=0,this.countPrestamosToday=0,this.countArticulos=0,this.inputUsuario=new h.NI({value:"",disabled:!0}),this.countUsuarios=0,this.userSearch="",this.articuloSearch="",this.articulosArray=[],this.datesArray=[],this.counterArray=[],this.userSelected={id:0,Nombres:"",Apellidos:"",MatriculaCodigo:"",rol:void 0},this.articuloSelected={id:0,Descripcion:"",Estatus:"",Codigo:"",Cantidad:0,Consumible:!1,Categoria:void 0,Ubicacion:void 0,Stock:0,ReferenciaUbicacion:""}}ngAfterViewInit(){}ngOnInit(){this.inputUsuario.disable(),this.getTodayDate(),(0,Kr.D)([this.updateEstatus(),this.getAllPrestamos(),this.getAllUsuarios(),this.getAllArticulos()]).subscribe(([a,e,f,v])=>{e&&(this.countPrestamos=e.length,this.dataPrestamo=e,this.counterArray=this.filterDates(this.dataPrestamo),console.log(this.counterArray),this.countPrestamosToday=this.getOccurrence(this.datesArray,this.today)),f&&(this.dataUsers=f,this.countUsuarios=f.length),v&&(this.dataArticulos=v,this.countArticulos=v.length)})}getAllPrestamos(){var a=this;return(0,o.Z)(function*(){return a.prestamoSvc.getAll().toPromise()})()}getAllUsuarios(){var a=this;return(0,o.Z)(function*(){return a.usrSvc.getAll().toPromise()})()}getAllArticulos(){var a=this;return(0,o.Z)(function*(){return a.articuloSvc.getAll().toPromise()})()}updateEstatus(){var a=this;return(0,o.Z)(function*(){return a.prestamoSvc.getEstatus().toPromise()})()}filterDates(a){const e={};for(const f of a)this.datesArray.push(f.Fecha_prestamo);return this.datesArray.forEach(function(f){e[f]=(e[f]||0)+1}),e}getOccurrence(a,e){return a.filter(f=>f===e).length}getTodayDate(){let a=new Date;this.today=a.toLocaleDateString("en-GB")}openModal(a){const e=this.modalService.open(Yr.e,{size:"lg",scrollable:!0});"users"==a?(e.componentInstance.data=this.dataUsers,e.componentInstance.type="users",e.componentInstance.search=this.userSearch,e.result.then(f=>{f&&(console.log(f),this.userSelected=f)})):"articulos"==a&&(e.componentInstance.data=this.dataArticulos,e.componentInstance.type="articulos",e.componentInstance.search=this.articuloSearch,e.result.then(f=>{f&&(console.log(f),f.Cantidad=1,this.articulosArray.some(Hh=>Hh.id===f.id)||(this.articuloSelected=f))}))}addArticulo(a){a.Cantidad<a.Stock&&(a.Cantidad=a.Cantidad+1)}validateErrors(){let a="";return 0===this.userSelected.id?(a="No se ha seleccionado un usuario",a):(0===this.articuloSelected.id&&(a="No se han agregado articulos"),a)}removeArticulo(a){a.Cantidad>1?a.Cantidad=a.Cantidad-1:this.articuloSelected={id:0,Descripcion:"",Estatus:"",Codigo:"",Cantidad:0,Consumible:!1,Categoria:void 0,Ubicacion:void 0,Stock:0,ReferenciaUbicacion:""}}savePrestamo(){var a=this;return(0,o.Z)(function*(){const e=a.validateErrors();if(""===e){console.log("No hay errores");try{let f={articuloObject:a.articuloSelected,Cantidad:a.articuloSelected.Cantidad,usuarioObject:a.userSelected},v=yield a.prestamoSvc.newPrestamoSolo(f).toPromise();v&&a.showConfirmado(v.message)}catch(f){console.log(f)}}else a.showErrors(e)})()}showConfirmado(a){V().fire({icon:"success",title:a,didClose:this.reloadPage,showConfirmButton:!0})}showErrors(a){V().fire({icon:"error",title:"Ha ocurrido el siguiente error:",text:a})}reloadPage(){window.location.reload()}}return l.\u0275fac=function(a){return new(a||l)(c.Y36(L.FF),c.Y36($r.K),c.Y36(ch.J),c.Y36(ah.K))},l.\u0275cmp=c.Xpm({type:l,selectors:[["app-home"]],decls:92,vars:28,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"card-box","bg-blue"],[1,"inner"],[1,"icon"],[3,"icon"],[1,"card-box-footer",3,"routerLink"],[1,"card-box","bg-green"],[1,"card-box","bg-orange"],[1,"card-box","bg-red"],[1,"inputData"],["appearance","fill",1,"form-fields"],["matInput","","autocomplete","off",3,"ngModel","ngModelChange","keyup.enter"],["mat-button","","matSuffix","","mat-stroked-button","","aria-label","search",3,"click"],[1,"form-fields"],["matInput","",3,"ngModel","formControl","ngModelChange"],["matInput","",3,"ngModel","ngModelChange","keyup.enter"],["class","listArticulos",4,"ngIf","ngIfElse"],[1,"btn-actions"],["type","button",1,"btn","btn-danger",3,"click"],["mat-raised-button","","color","primary","type","button",1,"btn-save",3,"swal","confirm"],["emptyArticulos",""],[1,"listArticulos"],[1,"list-group"],[1,"list-group-item","list-group-item-action"],[1,"articulos-title"],["mat-button","",1,"operation-button",3,"click"],[1,"badge","badge-primary"],[1,"col-md-8"]],template:function(a,e){if(1&a&&(c.TgZ(0,"h1"),c._uU(1,"Laboratorio de Redes y Electr\xf3nica"),c.qZA(),c._UZ(2,"mat-divider"),c.TgZ(3,"div",0),c.TgZ(4,"div",1),c.TgZ(5,"div",2),c.TgZ(6,"div",3),c.TgZ(7,"div",4),c.TgZ(8,"h3"),c._uU(9),c.qZA(),c.TgZ(10,"h3"),c._uU(11,"Prestamos registrados"),c.qZA(),c.qZA(),c.TgZ(12,"div",5),c._UZ(13,"fa-icon",6),c.qZA(),c.TgZ(14,"a",7),c._uU(15,"Ver m\xe1s "),c._UZ(16,"fa-icon",6),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"div",2),c.TgZ(18,"div",8),c.TgZ(19,"div",4),c.TgZ(20,"h3"),c._uU(21),c.qZA(),c.TgZ(22,"h3"),c._uU(23,"Prestamos hoy"),c.qZA(),c.qZA(),c.TgZ(24,"div",5),c._UZ(25,"fa-icon",6),c.qZA(),c.TgZ(26,"a",7),c._uU(27,"Ver m\xe1s "),c._UZ(28,"fa-icon",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"div",1),c.TgZ(30,"div",2),c.TgZ(31,"div",9),c.TgZ(32,"div",4),c.TgZ(33,"h3"),c._uU(34),c.qZA(),c.TgZ(35,"h3"),c._uU(36,"Articulos registrados"),c.qZA(),c.qZA(),c.TgZ(37,"div",5),c._UZ(38,"fa-icon",6),c.qZA(),c.TgZ(39,"a",7),c._uU(40,"Ver m\xe1s "),c._UZ(41,"fa-icon",6),c.qZA(),c.qZA(),c.qZA(),c.TgZ(42,"div",2),c.TgZ(43,"div",10),c.TgZ(44,"div",4),c.TgZ(45,"h3"),c._uU(46),c.qZA(),c.TgZ(47,"h3"),c._uU(48,"Usuarios registrados"),c.qZA(),c.qZA(),c.TgZ(49,"div",5),c._UZ(50,"fa-icon",6),c.qZA(),c.TgZ(51,"a",7),c._uU(52,"Ver m\xe1s "),c._UZ(53,"fa-icon",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(54,"mat-divider"),c._UZ(55,"br"),c.TgZ(56,"mat-card"),c.TgZ(57,"h1"),c._uU(58,"Prestamo R\xe1pido"),c.qZA(),c._UZ(59,"mat-divider"),c._UZ(60,"br"),c.TgZ(61,"div",11),c.TgZ(62,"mat-form-field",12),c.TgZ(63,"mat-label"),c._uU(64,"Buscar usuario"),c.qZA(),c.TgZ(65,"input",13),c.NdJ("ngModelChange",function(v){return e.userSearch=v})("keyup.enter",function(){return e.openModal("users")}),c.qZA(),c.TgZ(66,"button",14),c.NdJ("click",function(){return e.openModal("users")}),c.TgZ(67,"mat-icon"),c._uU(68,"search"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(69,"div",11),c.TgZ(70,"mat-form-field",15),c.TgZ(71,"mat-label"),c._uU(72,"Nombre"),c.qZA(),c.TgZ(73,"input",16),c.NdJ("ngModelChange",function(v){return e.userSelected.Nombres=v}),c.qZA(),c.qZA(),c.qZA(),c._UZ(74,"br"),c.TgZ(75,"div",11),c.TgZ(76,"mat-form-field",12),c.TgZ(77,"mat-label"),c._uU(78,"Buscar articulo"),c.qZA(),c.TgZ(79,"input",17),c.NdJ("ngModelChange",function(v){return e.articuloSearch=v})("keyup.enter",function(){return e.openModal("articulos")}),c.qZA(),c.TgZ(80,"button",14),c.NdJ("click",function(){return e.openModal("articulos")}),c.TgZ(81,"mat-icon"),c._uU(82,"search"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(83,"div",11),c.YNc(84,rh,13,2,"div",18),c.qZA(),c.TgZ(85,"div",19),c.TgZ(86,"button",20),c.NdJ("click",function(){return e.reloadPage()}),c._uU(87," Cancelar "),c.qZA(),c.TgZ(88,"button",21),c.NdJ("confirm",function(){return e.savePrestamo()}),c._uU(89," Confirmar "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(90,hh,6,0,"ng-template",null,22,c.W1O)),2&a){const f=c.MAs(91);c.xp6(9),c.Oqu(e.countPrestamos),c.xp6(4),c.Q6J("icon",e.faFileAlt),c.xp6(1),c.Q6J("routerLink",c.DdM(23,u)),c.xp6(2),c.Q6J("icon",e.faArrowCircleRight),c.xp6(5),c.Oqu(e.countPrestamosToday),c.xp6(4),c.Q6J("icon",e.faShareSquare),c.xp6(1),c.Q6J("routerLink",c.DdM(24,u)),c.xp6(2),c.Q6J("icon",e.faArrowCircleRight),c.xp6(6),c.Oqu(e.countArticulos),c.xp6(4),c.Q6J("icon",e.faDatabase),c.xp6(1),c.Q6J("routerLink",c.DdM(25,oh)),c.xp6(2),c.Q6J("icon",e.faArrowCircleRight),c.xp6(5),c.Oqu(e.countUsuarios),c.xp6(4),c.Q6J("icon",e.faUserFriends),c.xp6(1),c.Q6J("routerLink",c.DdM(26,nh)),c.xp6(2),c.Q6J("icon",e.faArrowCircleRight),c.xp6(12),c.Q6J("ngModel",e.userSearch),c.xp6(8),c.Q6J("ngModel",e.userSelected.Nombres)("formControl",e.inputUsuario),c.xp6(6),c.Q6J("ngModel",e.articuloSearch),c.xp6(5),c.Q6J("ngIf",0!=e.articuloSelected.id)("ngIfElse",f),c.xp6(4),c.Q6J("swal",c.DdM(27,sh))}},directives:[eh.d,d.BN,n.yS,fh.a8,s.KE,s.hX,ih.Nt,h.Fj,h.JJ,h.On,lh.lW,s.R9,vh.Hw,h.oH,z.O5,x.iL],styles:[".card-box[_ngcontent-%COMP%]{position:relative;color:#fff;padding:20px 10px 40px;margin:20px 0;border-radius:5px}.card-box[_ngcontent-%COMP%]:hover{text-decoration:none;color:#f1f1f1}.card-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:100px;transition:1s;-webkit-transition:1s}.card-box[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{padding:5px 10px 0}.card-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:27px;font-weight:bold;margin:0 0 8px;white-space:nowrap;padding:0;text-align:left}.card-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.card-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:auto;bottom:5px;right:5px;z-index:0;font-size:72px;color:#00000026}.card-box[_ngcontent-%COMP%]   .card-box-footer[_ngcontent-%COMP%]{position:absolute;left:0px;bottom:0px;text-align:center;padding:3px 0;color:#fffc;background:rgba(0,0,0,.1);width:100%;text-decoration:none}.card-box[_ngcontent-%COMP%]:hover   .card-box-footer[_ngcontent-%COMP%]{background:rgba(0,0,0,.3)}.bg-blue[_ngcontent-%COMP%]{background-color:#00c0ef!important}.bg-green[_ngcontent-%COMP%]{background-color:#00a65a!important}.bg-orange[_ngcontent-%COMP%]{background-color:#f39c12!important}.bg-red[_ngcontent-%COMP%]{background-color:#d9534f!important}.search-form-field[_ngcontent-%COMP%]{width:60%;size:10%;margin-left:10px;padding:5px 10px;background-color:#f5f5f5;border-radius:5px}.form-fields[_ngcontent-%COMP%]{width:90%;size:10%}.inputData[_ngcontent-%COMP%]{width:100%;margin:20px}.form-modal[_ngcontent-%COMP%]{width:100%}.btn-end[_ngcontent-%COMP%]{float:right}.btn-end[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}.listArticulos[_ngcontent-%COMP%]{width:100%}.btn-actions[_ngcontent-%COMP%]{margin-left:20px;margin-right:30px}.btn-save[_ngcontent-%COMP%]{float:right;margin-left:20px;margin-right:40px}"]}),l})()}];let zh=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[[n.Bz.forChild(mh)],n.Bz]}),l})();var th=i(484);let Mh=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[[z.ez,zh,th.q,d.uH,h.UX,h.u5,L.IJ,x.ii]]}),l})()}}]);